<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>"Креативные" сообщения в Skype</title>
	</head>
	<body>
		<h1>
			<big>
				<a href="/" title="Перейти на главную страницу">&#8962;</a>
			</big>
		</h1>
		
		<hr>
		
		<h1>
			<a href="http://flaz14.github.io/skype-extra-messaging/skype-extra-messaging.html">
				"Креативные" сообщения в Skype
			</a>
		</h1>
		
		<h3>[2017, Март]</h3>
		
		<h2>Все началось с проветривания</h2>
		
		<p>
			Свежий и прятный воздух в офисе - избитая тема. О предстоящем проветривании в Skype отравляется сообщение. 
			Очевидно, что одинаковые сообщения вроде <tt>проветривание?</tt> быстро надоели. Хочеться написать то же, только
			необычным способом. Просто для того, чтобы кто-нибудь в комнате улыбнулся... Сначала я отправлял сообщения вроде
			<tt>?еинавиртеворп</tt>, <tt>ПрОвЕтРиВаНиЕ?</tt> и т.д. Или писал слово на нескольких строках, например:

<pre>
П
Р
О
В
Е
Т
Р
И
В
А
Н
И
Е
?
</pre>

или 

<pre>
   Р     В      Т       И       А       И       ?
П     О     Е       Р       В       Н       Е
</pre>

		<p>
			Но креатив в этом направлении быстро закончился. Так что я стал изучать другие пути.
		
		<h2>Псевдографика и ASCII-арт не подходят</h2>
		
		<p>
			Первое, что ассоциируется со словом "текст" - это псевдографика и ASCII-арт. Казалось бы, возможности огромные.
			Можно воспользоваться готовым генератором, который поможет быстро подобрать шрифт и стиль текста под настроение. 
			Или даже "нарисовать" сообщение вручную. Но в реальности ничего не получается. Дело в том, что в Skype (и 
			в клиенте для Windows, и в клиенте для Linux, и в Web-приложении) не используется моноширинный шрифт. Почему
			не используется моноширинный шрифт? Сложно сказать. Не сказал бы, что он некрасивый. Это раньше был только
			<em>Fixedsys</em> и <em>Courier</em>. Сейчас же появилось множество моноширинных шрифтов с привлекательным видом.
			Расточительство рабочего пространства? Ну не знаю, в версии для Windows и в Web-приложении собственно область
			сообщений по ширине занимает всего лишь третью часть всего окна. Скорее всего, используется шрифт, установленный
			по умолчанию в операционной системе (по крайней мере Linux-версия использует глобальные настройки графического окружения).
			Как бы то ни было, символы разной ширины не дают насладиться псевдографикой и ASCII-артом. Возьмем, к примеру, 
			следующий псевдографический текст:
			
<pre>
 _   _   _   _   _ ___  _        _   _             _   __
| | |_| | | |_) |_  |  |_) | /| |_)  _|  |_| | /| |_  (  )
| | |   |_| |_) |_  |  |   |/ | |_) |_|  | | |/ | |_    /
                                       `                .
</pre>			
			
		<p>
			В браузере слово "проветривание" читается нормально в силу использования преформатированного текста, который
			всегда выводится на экран с помощью моноширинного шрифта. Но в Skype-клиентах все по-другому. На рисунке 1 
			приведено то же сообщение, только в Linux-версии [1]. А на рисунке 2 - в Web-приложении. 
			
		<h4 id="illustration-1">Рисунок 1 - Вид псевдографического сообщение в Linux-версии</h4>
		<img src="illustrations/pseudo-graphics-linux-version.png" width="800" 
		alt="фрагмент скриншота окна Skype Version 4.3.0.37, работающем в графическом окружении Cinnamon">
		
		
		<h4 id="illustration-2">Рисунок 2 - Вид псевдографического сообщение в Web-приложении</h4>
		<img src="illustrations/pseudo-graphics-web-app.png" width="800" 
		alt="фрагмент скриншота Web-приложения Skype, работающем в браузере Mozilla Firefox">
			
		<p>
			Комментарии, как говорится, излишни.
		
				
			
		<h2>Хитрости с Web-приложением</h2>
		
		<p>
			Про <strong>Inspect Element</strong> все знают. Заходим в Inspector и делаем все, что захотим. И ничего лучше не придумал,
			как заключить элемент p !!!здесь будет тэг!!! в тэг font со указанием использовать шрифт Courier. 
			
			Выглядит заметно лучше. По крайней мере, буквы не поехали. Конечно, если закрыть вкладку, то тюнинг пропадет.
			Но Chromium - программа с открытым исходным кодом. При жалании можно сделать изменения шрифта перманентным. 
			И еще много чего можно сделать (например, полосу прокрутки пошире и вообще, область непосредственно сообщений
			можно сделать больше). Впрочем, это отдельная тема.
			
			
		
		<h2>Unicode спешит на помощь</h2>
		
		<h2>И Капля псевдографики все же есть</h2>
		
		<h2>Смайлики - наше все</h2>
		
		
		<h2>А вообще, Skype ненужен...</h2>
		
		
		
		<p>
			Здесь "отключить" означает настроить PolicyKit таким образом, чтобы с его помощью нельзя было выполнять 
			административные задачи. Например, удалять пакеты посредством Synaptic (команда 
			<code>synaptic-pkexec</code>) или форматировать диски с помощью GParted (команда 
			<code>gparted-pkexec</code>). Но при этом должна остаться возможность выключать компьютер, менять настройки 
			сетевых подключений и выполнять другие действия, для которых по умолчанию никакие пароли не требуются.
		
		<p>
			Удалить PolicyKit в Linux Mint нельзя (от него зависит пакет <strong>cinnamon</strong> и многие другие). Но,
			даже если бы PolicyKit можно было удалить, появилась бы куча проблем: разрешения на выключение компьютера и 
			прочие действия пришлось бы настраивать заново (или с помощью SUID битов, или допиливанием PAM, или 
			каким-нибудь другим образом, ведь старые дистрибутивы обходились без PolicyKit, когда его еще не было).
		
		<p>
			У PolicyKit есть "действия", "правила" и т.д. Каждому такому понятию соответствуют свои конфиги. Например, 
			для "действий" есть <i>/usr/share/polkit-1/actions/</i>. Казалось бы, достаточно удалить ненужные файлы. Но 
			они могут создаваться при установке программ (тот же GParted) и при обновлении дистрибутива. Кроме того, с 
			первого раза не так просто разобраться в этом ворохе конфигов. Для "правил" есть 
			<i>/usr/share/polkit-1/rules.d/</i>, но и там темный лес.
		
		<p>
			А вот конфиги в <i>/etc</i> - именно то, что нужно 
			<sup id="footnote-1-top"><a href="#footnote-1-bottom">[1]</a></sup>. Итак:
			<ol>
				<li>
					Создаем фиктивную группу <strong>mypolkit</strong>:
					<p>
						<code>sudo addgroup mypolkit</code>

				<li>
					Правим файл <i>/etc/polkit-1/localauthority.conf.d/51-ubuntu-admin.conf</i> (в нем нет 
					предупреждений вроде <tt>DO NOT EDIT THIS FILE, it will be overwritten on update.</tt>). Не забываем
					предварительно сделать его бэкап, но только не в этот же каталог, а в другой, например, 
					<i>/backups</i>, иначе файл-бэкап будет воспринят как еще один конфиг. Отредактированный конфиг
					должен выглядеть так:
<p>
<pre>
[Configuration]
AdminIdentities=unix-group:mypolkit
</pre>	
			</ol>
			
		<p>
			В итоге PolicyKit будет запрашивать пароль не вызвавшего его пользователя, а пароль <strong>root</strong>.
			Но, поскольку пользователя <strong>root</strong> в Ubuntu (а следовательно, и в Linux Mint) нет, то, какой 
			пароль ни вводи, он не подойдет 
			<sup id="footnote-2-top"><a href="#footnote-2-bottom">[2]</a></sup> 
			<sup id="footnote-3-top"><a href="#footnote-3-bottom">[3]</a></sup>.
			<p>
				<img src="policy-kit-enter-password-window.png" width="480px"
				alt="здесь изображен скриншот окна PolicyKit для ввода пароля">
		
		<p>
			__________
			<ol>
				<li id="footnote-1-bottom">
					<p>
						<a href="#footnote-1-top" title="Перейти к основному тексту">&uarr;</a> 
						Если в Linux (у меня графическое окружение - Cinnamon) в качестве шрифта по умолчанию установить
						что-нить вроде Monospace (это алиас для моноширинного шрифта), то сообщение будет выглядеть прекрасно.
						Еще поменяется шрифт во всех программах. Почему в настройках самого Skype нельзя выставить шрифт - 
						непонятно.

				<li id="footnote-2-bottom">
					<p>
						<a href="#footnote-2-top" title="Перейти к основному тексту">&uarr;</a> 
						После описанных выше манипуляций нельзя будет изменить системное время из апплета на панели 
						задач. Но это не проблема: запускаем <code>gksudo cinnamon-settings</code> и меняем что душе 
						угодно (правда, тут надо быть осторожным, чтобы не испортить другие настройки).
						
				<li id="footnote-3-bottom">
					<p>
						<a href="#footnote-3-top" title="Перейти к основному тексту">&uarr;</a> 
						Если в системе все-таки есть пользователь <strong>root</strong> (т.е. если он был добавлен 
						вручную), нужно установить для него сложный (лучше - "невзламываемый", длиной около 50 случайных
						символов) пароль.
			</ol>
			
		<hr>
		
		<h1>
			<big>
				<a href="#" title="Перейти к началу страницы">&uarr;</a>
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<a href="/" title="Перейти на главную страницу">&#8962;</a>
			</big>
		</h1>
	</body>
</html>
